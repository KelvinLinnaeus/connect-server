-- UNIVYN Database Migration
-- Version: 010_indexes_constraints DOWN
-- Description: Drop indexes and constraints

BEGIN;

-- Drop all indexes in reverse order
DROP INDEX IF EXISTS idx_email_queue_created_at;
DROP INDEX IF EXISTS idx_email_queue_status;
DROP INDEX IF EXISTS idx_email_queue_space_id;
DROP INDEX IF EXISTS idx_trending_topics_recorded_at;
DROP INDEX IF EXISTS idx_trending_topics_trend_score;
DROP INDEX IF EXISTS idx_trending_topics_name;
DROP INDEX IF EXISTS idx_trending_topics_space_id;
DROP INDEX IF EXISTS idx_files_uploaded_at;
DROP INDEX IF EXISTS idx_files_mime_type;
DROP INDEX IF EXISTS idx_files_user_id;
DROP INDEX IF EXISTS idx_files_space_id;
-- Note: system_metrics indexes removed (table removed)
DROP INDEX IF EXISTS idx_user_sessions_expires_at;
DROP INDEX IF EXISTS idx_user_sessions_refresh_token;
DROP INDEX IF EXISTS idx_user_sessions_user_id;
DROP INDEX IF EXISTS idx_reports_created_at;
DROP INDEX IF EXISTS idx_reports_priority;
DROP INDEX IF EXISTS idx_reports_status;
DROP INDEX IF EXISTS idx_reports_content_id;
DROP INDEX IF EXISTS idx_reports_content_type;
DROP INDEX IF EXISTS idx_reports_reporter_id;
DROP INDEX IF EXISTS idx_reports_space_id;
DROP INDEX IF EXISTS idx_group_applications_status;
DROP INDEX IF EXISTS idx_group_applications_user_id;
DROP INDEX IF EXISTS idx_group_applications_role_id;
DROP INDEX IF EXISTS idx_group_roles_name;
DROP INDEX IF EXISTS idx_group_roles_group_id;
DROP INDEX IF EXISTS idx_past_questions_verified;
DROP INDEX IF EXISTS idx_past_questions_uploaded_by;
DROP INDEX IF EXISTS idx_past_questions_academic_year;
DROP INDEX IF EXISTS idx_past_questions_department;
DROP INDEX IF EXISTS idx_past_questions_course_code;
DROP INDEX IF EXISTS idx_past_questions_space_id;
DROP INDEX IF EXISTS idx_announcements_is_pinned;
DROP INDEX IF EXISTS idx_announcements_author_id;
DROP INDEX IF EXISTS idx_announcements_scheduled_for;
DROP INDEX IF EXISTS idx_announcements_status;
DROP INDEX IF EXISTS idx_announcements_priority;
DROP INDEX IF EXISTS idx_announcements_type;
DROP INDEX IF EXISTS idx_announcements_space_id;
DROP INDEX IF EXISTS idx_event_attendees_status;
DROP INDEX IF EXISTS idx_event_attendees_user_id;
DROP INDEX IF EXISTS idx_event_attendees_event_id;
DROP INDEX IF EXISTS idx_events_is_public;
DROP INDEX IF EXISTS idx_events_status;
DROP INDEX IF EXISTS idx_events_start_date;
DROP INDEX IF EXISTS idx_events_category;
DROP INDEX IF EXISTS idx_events_organizer;
DROP INDEX IF EXISTS idx_events_space_id;
DROP INDEX IF EXISTS idx_messages_is_read;
DROP INDEX IF EXISTS idx_messages_conversation_created;
DROP INDEX IF EXISTS idx_messages_created_at;
DROP INDEX IF EXISTS idx_messages_recipient_id;
DROP INDEX IF EXISTS idx_messages_sender_id;
DROP INDEX IF EXISTS idx_messages_conversation_id;
DROP INDEX IF EXISTS idx_conversation_participants_user_active;
DROP INDEX IF EXISTS idx_conversation_participants_is_active;
DROP INDEX IF EXISTS idx_conversation_participants_role;
DROP INDEX IF EXISTS idx_conversation_participants_user_id;
DROP INDEX IF EXISTS idx_conversation_participants_conversation_id;
DROP INDEX IF EXISTS idx_conversations_is_active;
DROP INDEX IF EXISTS idx_conversations_conversation_type;
DROP INDEX IF EXISTS idx_conversations_last_message_at;
DROP INDEX IF EXISTS idx_conversations_space_id;
DROP INDEX IF EXISTS idx_mentoring_sessions_topic;
DROP INDEX IF EXISTS idx_mentoring_sessions_scheduled_at;
DROP INDEX IF EXISTS idx_mentoring_sessions_status;
DROP INDEX IF EXISTS idx_mentoring_sessions_space_id;
DROP INDEX IF EXISTS idx_mentoring_sessions_mentee_id;
DROP INDEX IF EXISTS idx_mentoring_sessions_mentor_id;
DROP INDEX IF EXISTS idx_tutoring_sessions_subject;
DROP INDEX IF EXISTS idx_tutoring_sessions_scheduled_at;
DROP INDEX IF EXISTS idx_tutoring_sessions_status;
DROP INDEX IF EXISTS idx_tutoring_sessions_space_id;
DROP INDEX IF EXISTS idx_tutoring_sessions_student_id;
DROP INDEX IF EXISTS idx_tutoring_sessions_tutor_id;
DROP INDEX IF EXISTS idx_mentor_profiles_is_available;
DROP INDEX IF EXISTS idx_mentor_profiles_rating;
DROP INDEX IF EXISTS idx_mentor_profiles_industry;
DROP INDEX IF EXISTS idx_mentor_profiles_space_id;
DROP INDEX IF EXISTS idx_tutor_profiles_is_available;
DROP INDEX IF EXISTS idx_tutor_profiles_rating;
DROP INDEX IF EXISTS idx_tutor_profiles_subjects;
DROP INDEX IF EXISTS idx_tutor_profiles_space_id;
DROP INDEX IF EXISTS idx_mentor_applications_submitted_at;
DROP INDEX IF EXISTS idx_mentor_applications_industry;
DROP INDEX IF EXISTS idx_mentor_applications_status;
DROP INDEX IF EXISTS idx_mentor_applications_space_id;
DROP INDEX IF EXISTS idx_mentor_applications_applicant_id;
DROP INDEX IF EXISTS idx_tutor_applications_submitted_at;
DROP INDEX IF EXISTS idx_tutor_applications_status;
DROP INDEX IF EXISTS idx_tutor_applications_space_id;
DROP INDEX IF EXISTS idx_tutor_applications_applicant_id;
DROP INDEX IF EXISTS idx_notifications_priority;
DROP INDEX IF EXISTS idx_notifications_created_at;
DROP INDEX IF EXISTS idx_notifications_is_read;
DROP INDEX IF EXISTS idx_notifications_type;
DROP INDEX IF EXISTS idx_notifications_from_user_id;
DROP INDEX IF EXISTS idx_notifications_to_user_id;
DROP INDEX IF EXISTS idx_follows_space_id;
DROP INDEX IF EXISTS idx_follows_following_id;
DROP INDEX IF EXISTS idx_follows_follower_id;
DROP INDEX IF EXISTS idx_likes_comment_id;
DROP INDEX IF EXISTS idx_likes_post_id;
DROP INDEX IF EXISTS idx_likes_user_id;
DROP INDEX IF EXISTS idx_comments_created_at;
DROP INDEX IF EXISTS idx_comments_parent_comment_id;
DROP INDEX IF EXISTS idx_comments_author_id;
DROP INDEX IF EXISTS idx_comments_post_id;
DROP INDEX IF EXISTS idx_posts_is_pinned;
DROP INDEX IF EXISTS idx_posts_status;
DROP INDEX IF EXISTS idx_posts_space_created;
DROP INDEX IF EXISTS idx_posts_created_at;
DROP INDEX IF EXISTS idx_posts_quoted_post_id;
DROP INDEX IF EXISTS idx_posts_parent_post_id;
DROP INDEX IF EXISTS idx_posts_group_id;
DROP INDEX IF EXISTS idx_posts_community_id;
DROP INDEX IF EXISTS idx_posts_space_id;
DROP INDEX IF EXISTS idx_posts_author_id;
DROP INDEX IF EXISTS idx_group_members_role;
DROP INDEX IF EXISTS idx_group_members_user_id;
DROP INDEX IF EXISTS idx_group_members_group_id;
DROP INDEX IF EXISTS idx_community_members_user_id;
DROP INDEX IF EXISTS idx_community_members_community_id;
DROP INDEX IF EXISTS idx_groups_created_by;
DROP INDEX IF EXISTS idx_groups_status;
DROP INDEX IF EXISTS idx_groups_group_type;
DROP INDEX IF EXISTS idx_groups_category;
DROP INDEX IF EXISTS idx_groups_community_id;
DROP INDEX IF EXISTS idx_groups_space_id;
DROP INDEX IF EXISTS idx_communities_is_public;
DROP INDEX IF EXISTS idx_communities_created_by;
DROP INDEX IF EXISTS idx_communities_category;
DROP INDEX IF EXISTS idx_communities_space_id;
DROP INDEX IF EXISTS idx_users_space_email;
DROP INDEX IF EXISTS idx_users_tutor_status;
DROP INDEX IF EXISTS idx_users_mentor_status;
DROP INDEX IF EXISTS idx_users_space_id;
DROP INDEX IF EXISTS idx_spaces_is_active;
DROP INDEX IF EXISTS idx_spaces_type;

COMMIT;
